(window.webpackJsonp=window.webpackJsonp||[]).push([["klaviyo-integration-plugin"],{s4q2:function(t,e,o){"use strict";o.r(e);var n=o("FGIj");function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l,p,f,y=function(t){function e(){return r(this,e),a(this,c(e).apply(this,arguments))}var o,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,t),o=e,(n=[{key:"init",value:function(){window._learnq=window._learnq||[],this.options.customerIdentityInfo&&window._learnq.push(["identify",{$id:this.options.customerIdentityInfo.id,$email:this.options.customerIdentityInfo.email,$first_name:this.options.customerIdentityInfo.firstName,$last_name:this.options.customerIdentityInfo.lastName,$phone_number:this.options.customerIdentityInfo.phoneNumber,$city:this.options.customerIdentityInfo.city,$region:this.options.customerIdentityInfo.region,$country:this.options.customerIdentityInfo.country,$zip:this.options.customerIdentityInfo.zip,Birthday:this.options.customerIdentityInfo.birthday}])}}])&&s(o.prototype,n),i&&s(o,i),e}(n.a);function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function m(t,e){return!e||"object"!==h(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function w(t,e){return(w=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}f={customerIdentityInfo:null},(p="options")in(l=y)?Object.defineProperty(l,p,{value:f,enumerable:!0,configurable:!0,writable:!0}):l[p]=f;var _=function(t){function e(){return d(this,e),m(this,v(e).apply(this,arguments))}var o,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&w(t,e)}(e,t),o=e,(n=[{key:"init",value:function(){window._learnq=window._learnq||[],this.options.productInfo||!console?(window._learnq.push(["track","Viewed Product",this.options.productInfo]),window._learnq.push(["trackViewedItem",{Title:this.options.productInfo.ProductName,ItemId:this.options.productInfo.ProductID,Categories:this.options.productInfo.Categories,ImageUrl:this.options.productInfo.ImageURL,Url:this.options.productInfo.URL,Metadata:{Brand:this.options.productInfo.Brand,Price:this.options.productInfo.Price,CompareAtPrice:this.options.productInfo.CompareAtPrice}}])):console.error("[Klaviyo] Product info configuration was not set.")}}])&&b(o.prototype,n),i&&b(o,i),e}(n.a);function g(t){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function k(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function S(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function O(t,e){return!e||"object"!==g(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function I(t){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function j(t,e){return(j=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}!function(t,e,o){e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o}(_,"options",{productInfo:null});var P=function(t){function e(){return k(this,e),O(this,I(e).apply(this,arguments))}var o,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&j(t,e)}(e,t),o=e,(n=[{key:"init",value:function(){window._learnq=window._learnq||[],this.options.startedCheckoutEventTrackingRequest||!console?window._learnq.push(["track","Started Checkout",this.options.startedCheckoutEventTrackingRequest]):console.error("Checkout Started Event Tracking DTO was not set")}}])&&S(o.prototype,n),i&&S(o,i),e}(n.a);!function(t,e,o){e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o}(P,"options",{startedCheckoutEventTrackingRequest:null});var E=o("3rxU");function C(t){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function M(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function q(t,e){return!e||"object"!==C(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function K(t){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function L(t,e){return(L=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var R=function(t){function e(){return T(this,e),q(this,K(e).apply(this,arguments))}var o,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&L(t,e)}(e,t),o=e,(n=[{key:"init",value:function(){if(this.storage=E.a,this.options.afterInteraction)return null!==this.storage.getItem(this.options.klaviyoInitializedStorageKey)?this._initKlaviyo():this.registerEvents();this._initKlaviyo()}},{key:"registerEvents",value:function(){window.addEventListener("scroll",this._prepareForInitialization.bind(this),{once:!0})}},{key:"_prepareForInitialization",value:function(){this.storage.setItem(this.options.klaviyoInitializedStorageKey,""),this._initKlaviyo()}},{key:"_initKlaviyo",value:function(){var t=document.createElement("script");t.type="text/javascript",t.setAttribute("async",!0),t.src="https://static.klaviyo.com/onsite/js/klaviyo.js?company_id="+this.options.publicApiKey,document.body.appendChild(t)}}])&&M(o.prototype,n),i&&M(o,i),e}(n.a);!function(t,e,o){e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o}(R,"options",{klaviyoInitializedStorageKey:"klaviyoInitializedStorageKey"});var N=o("gHbT"),V=o("k8s9");function z(t){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function F(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function x(t,e){return!e||"object"!==z(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function A(t){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function D(t,e){return(D=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var U=function(t){function e(){return F(this,e),x(this,A(e).apply(this,arguments))}var o,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&D(t,e)}(e,t),o=e,(n=[{key:"init",value:function(){this._client=new V.a,this._getFormDataElements(),this.registerEvents()}},{key:"_getFormDataElements",value:function(){this._submitBtn=N.a.querySelector(this.el,this.options.submitBtnSelector),this._email=N.a.querySelector(this.el,this.options.emailFieldSelector),this._subscribeToNewsletter=N.a.querySelector(this.el,this.options.subscribeToNewsletterSelector),this._successMessage=N.a.querySelector(this.el,this.options.successMessageSelector),this._errorMessage=N.a.querySelector(this.el,this.options.errorMessageSelector),this._emailNotValid=N.a.querySelector(this.el,this.options.notValidEmailMessageSelector)}},{key:"registerEvents",value:function(){this.el.addEventListener("submit",this.onSubmit.bind(this))}},{key:"onSubmit",value:function(t){return t.preventDefault(),this._validateEmail(this._email.value)?this._proceedSubscription():this._showEmailValidationErrorMessage()}},{key:"_proceedSubscription",value:function(){var t=this,e=this._createFormData();fetch(this.options.apiURL,{headers:{accept:this.options.fetchHeaderAccept,"content-type":this.options.contentType},body:e,method:"POST"}).then((function(e){t._handleResponse(e)})).catch((function(t){console.error(t)}))}},{key:"_handleResponse",value:function(t){return t.ok?this._showSuccessMessage():this._showErrorMessage()}},{key:"_showSuccessMessage",value:function(){this._email.value="",this._errorMessage.classList.add(this.options.hiddenCls),this._emailNotValid.classList.add(this.options.hiddenCls),this._successMessage.classList.remove(this.options.hiddenCls)}},{key:"_showErrorMessage",value:function(){this._errorMessage.classList.remove(this.options.hiddenCls),this._emailNotValid.classList.add(this.options.hiddenCls),this._successMessage.classList.add(this.options.hiddenCls)}},{key:"_showEmailValidationErrorMessage",value:function(){this._errorMessage.classList.add(this.options.hiddenCls),this._emailNotValid.classList.remove(this.options.hiddenCls),this._successMessage.classList.add(this.options.hiddenCls)}},{key:"_createFormData",value:function(){var t=new URLSearchParams;return t.append("a",this.options.publicApiKey),t.append("email",this._email.value),t.append("platform","api"),t.append("variant",this.options.variantID),t.append("product",this.options.productID),t.append("subscribe_for_newsletter",this._subscribeToNewsletter.checked),t}},{key:"_validateEmail",value:function(t){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)}}])&&$(o.prototype,n),i&&$(o,i),e}(n.a);!function(t,e,o){e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o}(U,"options",{submitBtnSelector:".btn-submit-stock-notification",errorCls:"has-error",validCls:"is-valid",emailFieldSelector:"#email",subscribeToNewsletterSelector:"#subscribeToNewsletter",apiURL:"https://a.klaviyo.com/onsite/components/back-in-stock/subscribe",contentType:"application/x-www-form-urlencoded;charset=UTF-8",hiddenCls:"d-none",successMessageSelector:".klaviyo-success",errorMessageSelector:".klaviyo-error",notValidEmailMessageSelector:".klaviyo-email-not-valid",fetchHeaderAccept:"application/json, text/plain, */*"});var B=window.PluginManager;B.register("KlaviyoIdentityTrackingComponent",y,"[data-klaviyo-identity-tracking-component]"),B.register("KlaviyoProductViewedEventTrackingComponent",_,"[data-klaviyo-product-viewed-event-tracking-component]"),B.register("KlaviyoCheckoutStartedEventTrackingComponent",P,"[data-klaviyo-checkout-started-event-tracking-component]"),B.register("KlaviyoTracking",R,"[data-klaviyo-tracking]"),B.register("KlaviyoBackInStockNotification",U,"[data-klaviyo-back-in-stock-notification]")}},[["s4q2","runtime","vendor-node","vendor-shared"]]]);